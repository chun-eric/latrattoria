'use state';

export const fullMenuData = {
  menuItems: [
    {
      name: 'Bruschetta al Pomodoro',
      price: '$12.00',
      description:
        'Grilled bread topped with diced tomatoes, basil, and a drizzle of olive oil',
      category: 'appetizer',
      image: './images/menuImages/Bruschetta al Pomodoro.webp',
    },
    {
      name: 'Carpaccio di Manzo',
      price: '$16.00',
      description:
        'Thinly sliced raw beef with arugula, capers, and Parmesan shavings',
      category: 'appetizer',
      image: './images/menuImages/Carpaccio di Manzo.webp',
    },
    {
      name: 'Insalata Caprese',
      price: '$14.00',
      description:
        'Slices of fresh mozzarella and tomatoes, garnished with basil leaves and a balsamic drizzle',
      category: 'appetizer',
      image: './images/menuImages/Insalata Caprese.webp',
    },
    {
      name: 'Calamari Fritti',
      price: '$15.00',
      description:
        'Golden-brown fried calamari rings with a side of marinara sauce',
      category: 'appetizer',
      image: './images/menuImages/Calamari Fritti.webp',
    },
    {
      name: 'Risotto ai Funghi Porcini',
      price: '$22.00',
      description: 'Creamy risotto with porcini mushrooms and Parmesan cheese',
      category: 'main',
      image: './images/menuImages/Risotto ai Funghi Porcini.webp',
    },
    {
      name: 'Tagliatelle al Tartufo',
      price: '$26.00',
      description: 'Tagliatelle pasta coated in a creamy truffle sauce',
      category: 'main',
      image: './images/menuImages/Tagliatelle al Tartufo.webp',
    },
    {
      name: 'Gnocchi alla Sorrentina',
      price: '$18.00',
      description:
        'Baked gnocchi in a tomato sauce topped with melted mozzarella and basil',
      category: 'main',
      image: './images/menuImages/Gnocchi alla Sorrentina.webp',
    },
    {
      name: 'Linguine alle Vongole',
      price: '$24.00',
      description: 'Linguine pasta with clams, garlic, and parsley',
      category: 'main',
      image: './images/menuImages/Linguine alle Vongole.webp',
    },
    {
      name: 'Filetto di Manzo',
      price: '$32.00',
      description:
        'Grilled beef tenderloin with a side of vegetables and a wine reduction sauce',
      category: 'main',
      image: './images/menuImages/Filetto di Manzo.webp',
    },
    {
      name: 'Pollo al Limone',
      price: '$20.00',
      description:
        'Chicken breast with a lemon caper sauce, accompanied by sautéed spinach and potatoes',
      category: 'main',
      image: './images/menuImages/Pollo al Limone.webp',
    },
    {
      name: 'Branzino al Forno',
      price: '$28.00',
      description: 'Oven-baked sea bass garnished with herbs and lemon slices',
      category: 'main',
      image: './images/menuImages/Branzino al Forno.webp',
    },
    {
      name: 'Ossobuco alla Milanese',
      price: '$30.00',
      description: 'Braised veal shank in a rich sauce, served with risotto',
      category: 'main',
      image: './images/menuImages/Ossobuco alla Milanese.webp',
    },
    {
      name: 'Patate al Rosmarino',
      price: '$8.00',
      description: 'Roasted potato wedges with rosemary',
      category: 'side',
      image: './images/menuImages/Patate al Rosmarino.webp',
    },
    {
      name: 'Spinaci Saltati',
      price: '$7.00',
      description: 'Sautéed spinach with garlic',
      category: 'side',
      image: './images/menuImages/Spinaci Saltati.webp',
    },
    {
      name: 'Verdure Grigliate',
      price: '$9.00',
      description: 'Grilled seasonal vegetables',
      category: 'side',
      image: './images/menuImages/Verdure Grigliate.webp',
    },
    {
      name: 'Insalata Mista',
      price: '$10.00',
      description:
        'Mixed green salad with various vegetables and a light dressing',
      category: 'side',
      image: './images/menuImages/Insalata Mista.webp',
    },
    {
      name: 'Tiramisu',
      price: '$10.00',
      description:
        'Classic Italian dessert with coffee-soaked ladyfingers and mascarpone cream',
      category: 'dessert',
      image: './images/menuImages/Tiramisu.webp',
    },
    {
      name: 'Panna Cotta',
      price: '$9.00',
      description: 'Panna cotta topped with a berry coulis',
      category: 'dessert',
      image: './images/menuImages/Panna Cotta.webp',
    },
    {
      name: 'Cannoli Siciliani',
      price: '$8.00',
      description: 'Crispy cannoli shells filled with ricotta cream',
      category: 'dessert',
      image: './images/menuImages/Cannoli Siciliani.webp',
    },
    {
      name: 'Torta al Limone',
      price: '$8.00',
      description: 'Lemon tart with a golden crust and lemon filling',
      category: 'dessert',
      image: './images/menuImages/Torta al Limone.webp',
    },
    {
      name: 'Assorted Italian Cheeses',
      price: '$18.00',
      description:
        'Selection of Italian cheeses, possibly with some honey and nuts on the side',
      category: 'dessert',
      image: './images/menuImages/Assorted Italian Cheeses.webp',
    },
    {
      name: 'Panzanella',
      price: '$12.00',
      description: 'Tuscan bread salad with tomatoes, cucumbers, and onions',
      category: 'appetizer',
      image: './images/menuImages/Panzanella.webp',
    },
    {
      name: 'Arancini di Riso',
      price: '$14.00',
      description: 'Fried rice balls stuffed with cheese and peas',
      category: 'appetizer',
      image: './images/menuImages/Arancini-di-Riso.webp',
    },
    {
      name: 'Pasta e Fagioli',
      price: '$14.00',
      description: 'Traditional pasta and bean soup',
      category: 'soup',
      image: './images/menuImages/Pasta-e-Fagioli.webp',
    },
    {
      name: 'Minestrone',
      price: '$12.00',
      description: 'Hearty vegetable soup with beans and pasta',
      category: 'soup',
      image: './images/menuImages/Minestrone.webp',
    },
    {
      name: 'Zuppa di Pesce',
      price: '$20.00',
      description: 'Seafood soup with a tomato base',
      category: 'soup',
      image: './images/menuImages/Zuppa-di-Pesce.webp',
    },
    {
      name: 'Ravioli al Burro e Salvia',
      price: '$18.00',
      description: 'Ravioli with butter and sage sauce',
      category: 'main',
      image: './images/menuImages/Ravioli-al-Burro-e-Salvia.webp',
    },
    {
      name: 'Fettuccine Alfredo',
      price: '$20.00',
      description: 'Fettuccine pasta with a creamy Alfredo sauce',
      category: 'main',
      image: './images/menuImages/Fettuccine Alfredo.webp',
    },
    {
      name: 'Saltimbocca alla Romana',
      price: '$25.00',
      description:
        'Veal cutlets with prosciutto and sage, in a white wine sauce',
      category: 'main',
      image: './images/menuImages/Saltimbocca alla Romana.webp',
    },
    {
      name: 'Melanzane alla Parmigiana',
      price: '$18.00',
      description: 'Baked eggplant with tomato sauce and Parmesan cheese',
      category: 'main',
      image: './images/menuImages/Melanzane alla Parmigiana.webp',
    },
    {
      name: 'Panna Cotta al Cioccolato',
      price: '$10.00',
      description: 'Chocolate panna cotta with a rich chocolate sauce',
      category: 'dessert',
      image: './images/menuImages/Panna Cotta al Cioccolato.webp',
    },
    {
      name: 'Zabaglione',
      price: '$9.00',
      description: 'Italian custard made with Marsala wine',
      category: 'dessert',
      image: './images/menuImages/Zabaglione.webp',
    },
    {
      name: 'Affogato',
      price: '$8.00',
      description: 'Vanilla ice cream "drowned" in a shot of hot espresso',
      category: 'dessert',
      image: './images/menuImages/Affogato.webp',
    },
    {
      name: 'Gelato',
      price: '$7.00',
      description: 'Assorted flavors of Italian ice cream',
      category: 'dessert',
      image: './images/menuImages/Gelato.webp',
    },
    {
      name: 'Semifreddo',
      price: '$9.00',
      description: 'Semi-frozen dessert with a creamy texture',
      category: 'dessert',
      image: './images/menuImages/Semifreddo.webp',
    },
    {
      name: 'Formaggi Misti',
      price: '$16.00',
      description: 'Mixed cheese platter with Italian specialties',
      category: 'dessert',
      image: './images/menuImages/Formaggi Misti.webp',
    },
  ],
};

console.log(fullMenuData);
// dom to be fully loaded
document.addEventListener('DOMContentLoaded', function () {
  const menuBoardContainer = document.querySelector('.menu-board-container');

  // function to render  all the menu Items from constants.js
  function renderMenuItems(items) {
    menuBoardContainer.innerHTML = '';

    if (!menuBoardContainer) {
      console.error('Menu board container not found');
      return;
    }

    console.log(`Rendering ${items.length} menu items`);

    items.forEach(item => {
      const menuBoard = document.createElement('div');
      menuBoard.className = 'menu-board';
      menuBoard.setAttribute('data-category', item.category);

      menuBoard.innerHTML = `
            <img src="${item.image}" alt="${item.name}"loading="lazy" />
            <div class="description-container">
              <div class="menu-description">
                <p class="item-name">${item.name}</p>
                <p class="item-price">${item.price}</p>
              </div>
              <p class="item-description">${item.description}</p>
            </div>   
      `;

      menuBoardContainer.appendChild(menuBoard);
    });
  }

  // function to filter menu items based on category
  function filterMenuItems(filter) {
    const menuItems = document.querySelectorAll('.menu-board');
    menuItems.forEach(item => {
      if (filter === 'all' || item.getAttribute('data-category') === filter) {
        item.classList.remove('hide');
        item.style.display = 'flex';
      } else {
        item.classList.add('hide');
        item.style.display = 'none';
      }
    });
  }

  // event listener for filter buttons to add active class and filter menuItems
  const filterButtons = document.querySelectorAll('.filter-btn');
  filterButtons.forEach(button => {
    button.addEventListener('click', function () {
      const filter = button.getAttribute('data-filter');
      filterButtons.forEach(btn => btn.classList.remove('active'));
      button.classList.add('active');
      filterMenuItems(filter);
    });
  });

  //Initial Render
  console.log('Full menu data:', fullMenuData);
  console.log('Number of menu items:', fullMenuData.menuItems.length);
  renderMenuItems(fullMenuData.menuItems);

  // Scroll to top functionality
  const scrollToTopBtn = document.getElementById('scrollToTopBtn');
  const rootElement = document.documentElement;

  function handleScroll() {
    const scrollTotal = rootElement.scrollHeight - rootElement.clientHeight;
    const scrollFraction = rootElement.scrollTop / scrollTotal;
    if (scrollFraction > 0.05) {
      scrollToTopBtn.classList.add('show');
    } else {
      scrollToTopBtn.classList.remove('show');
    }
  }

  function scrollToTop() {
    rootElement.scrollTo({
      top: 0,
      behavior: 'smooth',
    });
  }

  if (scrollToTopBtn) {
    scrollToTopBtn.addEventListener('click', scrollToTop);
    document.addEventListener('scroll', handleScroll);
  } else {
    console.error('Scroll to top button not found');
  }

  handleScroll();
});
